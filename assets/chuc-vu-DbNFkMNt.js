import{_ as f,S as u,b as r,A as h,c as d,d as V,a as e,e as C,w as p,v,o as _,y as g,z as T,F as b,g as x,t as m}from"./index-DsFX8v4I.js";/* empty css                     *//* empty css                   */const y={props:{isOpen:Boolean},data(){return{MaCV:"",TenCV:"",SoTietMien:"",danhSachChucVu:[]}},methods:{async tao_ma_nhiem_vu(){try{const o=await r.get(`
                    ${h}/chuc-vu/danh-sach-chuc-vu
                `);if(!o.data.success)throw new Error("Lá»—i khi láº¥y danh sÃ¡ch giÃ¡o viÃªn");const t=o.data.data;let c=0;t.forEach(i=>{const s=i.MaCV.match(/\d+/);if(s){const n=parseInt(s[0],10);n>c&&(c=n)}});const a=c+1;return a<10?`CV00${a}`:a<100?`CV0${a}`:`C${a}`}catch(o){return console.error("Lá»—i khi táº¡o mÃ£ chá»©c vá»¥:",o),"CV001"}},async them_chuc_vu(){if(!this.TenCV||!this.SoTietMien){u.fire({title:"Thiáº¿u thÃ´ng tin!",text:"Vui lÃ²ng nháº­p Ä‘á»§ thÃ´ng tin trÆ°á»›c khi lÆ°u.",icon:"warning",confirmButtonText:"OK",confirmButtonColor:"#3085d6"});return}const t={MaCV:await this.tao_ma_nhiem_vu(),TenCV:this.TenCV,SoTietMien:this.SoTietMien};this.$emit("save",t)}}},w={key:0,class:"modal-overlay"},B={class:"add-modal"},$={class:"add-modal__content"},O={class:"modal-actions"};function L(o,t,c,a,i,s){return c.isOpen?(_(),d("div",w,[e("div",B,[e("div",$,[t[6]||(t[6]=e("h2",null,"ThÃªm chá»©c vá»¥",-1)),e("label",null,[t[4]||(t[4]=C(" TÃªn chá»©c vá»¥: ")),p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>i.TenCV=n),type:"text"},null,512),[[v,i.TenCV]])]),e("label",null,[t[5]||(t[5]=C(" Sá»‘ tiáº¿t Ä‘Æ°á»£c miá»…n: ")),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>i.SoTietMien=n),type:"text"},null,512),[[v,i.SoTietMien]])]),e("div",O,[e("button",{onClick:t[2]||(t[2]=n=>o.$emit("close"))},"ÄÃ³ng"),e("button",{onClick:t[3]||(t[3]=(...n)=>s.them_chuc_vu&&s.them_chuc_vu(...n))},"ThÃªm")])])])])):V("",!0)}const D=f(y,[["render",L]]),P={props:{isOpen:Boolean,chucVu:Object},data(){return{MaCV:"",TenCV:"",SoTietMien:""}},watch:{chucVu:{immediate:!0,deep:!0,handler(o){o&&(this.TenCV=o.TenCV||"",this.SoTietMien=o.SoTietMien||"")}}},methods:{luu_thong_tin(){const o={MaCV:this.chucVu.MaCV,TenCV:this.TenCV,SoTietMien:this.SoTietMien};this.$emit("save",o)}}},N={key:0,class:"modal-overlay"},U={class:"edit-modal"},X={class:"edit-modal__content"},E={class:"modal-actions"};function K(o,t,c,a,i,s){return c.isOpen?(_(),d("div",N,[e("div",U,[e("div",X,[t[6]||(t[6]=e("h2",null,"Sá»­a chá»©c vá»¥",-1)),e("label",null,[t[4]||(t[4]=C(" TÃªn chá»©c vá»¥: ")),p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>i.TenCV=n),type:"text"},null,512),[[v,i.TenCV]])]),e("label",null,[t[5]||(t[5]=C(" Sá»‘ tiáº¿t Ä‘Æ°á»£c miá»…n: ")),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>i.SoTietMien=n),min:"0",type:"number"},null,512),[[v,i.SoTietMien]])]),e("div",E,[e("button",{onClick:t[2]||(t[2]=n=>o.$emit("close"))},"ÄÃ³ng"),e("button",{onClick:t[3]||(t[3]=(...n)=>s.luu_thong_tin&&s.luu_thong_tin(...n))},"LÆ°u")])])])])):V("",!0)}const A=f(P,[["render",K]]),I={components:{ThemChucVuModal:D,SuaChucVuModal:A},data(){return{danhSachChucVu:[],hienModalThem:!1,hienModalSua:!1,chucVuDangChinhSua:null}},async created(){await this.hien_danh_sach_chuc_vu()},methods:{async hien_danh_sach_chuc_vu(){try{const o=await r.get(`
                    ${h}/chuc-vu/danh-sach-chuc-vu
                `);o.data.success&&(this.danhSachChucVu=o.data.data)}catch(o){console.log("Lá»—i khi láº¥y danh sÃ¡ch chá»©c vá»¥: ",o)}},async goi_api_them_chuc_vu(o){console.log("Chá»©c vá»¥ tá»« modal:"),console.log(o);try{(await r.post(`
                    ${h}/chuc-vu/them-chuc-vu
                `,o)).data.success?(u.fire({icon:"success",title:"ThÃªm thÃ nh cÃ´ng!",text:"Dá»¯ liá»‡u Ä‘Ã£ Ä‘Æ°á»£c thÃªm vÃ o há»‡ thá»‘ng.",showConfirmButton:!1,timer:1500,timerProgressBar:!0,toast:!0,position:"top-end",background:"#f0fff4",iconColor:"#2ecc71",customClass:{popup:"success-toast",title:"success-title",content:"success-content"}}),await this.hien_danh_sach_chuc_vu(),this.hienModalThem=!1):u.fire({icon:"error",title:"ThÃªm tháº¥t báº¡i!",text:"KhÃ´ng thá»ƒ thÃªm dá»¯ liá»‡u vÃ o há»‡ thá»‘ng.",showConfirmButton:!1,timer:1500,timerProgressBar:!0,toast:!0,position:"top-end",background:"#fff1f2",iconColor:"#e74c3c",customClass:{popup:"error-toast",title:"error-title",content:"error-content"}})}catch(t){console.error(t),u.fire("Lá»—i!","CÃ³ lá»—i xáº£y ra khi thÃªm dá»¯ liá»‡u!")}},async goi_api_sua_chuc_vu(o){const t=o.MaCV,c={TenCV:o.TenCV,SoTietMien:o.SoTietMien};console.log(c);try{(await r.put(`
                    ${h}/chuc-vu/sua-chuc-vu?MaCV=${t}`,c)).data.success?(u.fire({icon:"success",title:"Sá»­a thÃ nh cÃ´ng!",text:"Dá»¯ liá»‡u Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t thÃ nh cÃ´ng.",showConfirmButton:!1,timer:1500,timerProgressBar:!0,toast:!0,position:"top-end",background:"#f0fff4",iconColor:"#2ecc71",customClass:{popup:"success-toast",title:"success-title",content:"success-content"}}),await this.hien_danh_sach_chuc_vu(),this.hienModalSua=!1):u.fire({icon:"error",title:"Sá»­a tháº¥t báº¡i!",text:"KhÃ´ng thá»ƒ cáº­p nháº­t dá»¯ liá»‡u.",showConfirmButton:!1,timer:1500,timerProgressBar:!0,toast:!0,position:"top-end",background:"#fff1f2",iconColor:"#e74c3c",customClass:{popup:"error-toast",title:"error-title",content:"error-content"}})}catch(a){console.error("Lá»—i khi cáº­p nháº­t chá»©c vá»¥:",a),u.fire("Lá»—i!","CÃ³ lá»—i xáº£y ra khi sá»­a dá»¯ liá»‡u!")}},async goi_api_xoa_nhiem_vu(o){if((await u.fire({title:"XÃ¡c nháº­n xÃ³a",text:"Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a dá»¯ liá»‡u nÃ y khÃ´ng?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"XÃ³a",cancelButtonText:"Há»§y"})).isConfirmed)try{(await r.delete(`
                        ${h}/chuc-vu/xoa-chuc-vu?MaCV=${o}
                    `)).data.success?(u.fire({icon:"success",title:"XÃ³a thÃ nh cÃ´ng!",text:"Dá»¯ liá»‡u Ä‘Ã£ Ä‘Æ°á»£c xÃ³a khá»i há»‡ thá»‘ng.",showConfirmButton:!1,timer:1500,timerProgressBar:!0,toast:!0,position:"top-end",background:"#f0fff4",iconColor:"#2ecc71",customClass:{popup:"success-toast",title:"success-title",content:"success-content"}}),await this.hien_danh_sach_chuc_vu()):u.fire({icon:"error",title:"XÃ³a tháº¥t báº¡i!",text:"KhÃ´ng thá»ƒ xÃ³a dá»¯ liá»‡u khá»i há»‡ thá»‘ng.",showConfirmButton:!1,timer:1500,timerProgressBar:!0,toast:!0,position:"top-end",background:"#fff1f2",iconColor:"#e74c3c",customClass:{popup:"error-toast",title:"error-title",content:"error-content"}})}catch(c){console.log(c),u.fire("Lá»—i!","CÃ³ lá»—i xáº£y ra khi xÃ³a dá»¯ liá»‡u!")}},mo_modal_them_chuc_vu(){console.log("Open modal button works"),this.hienModalThem=!0},dong_modal_them_chuc_vu(){console.log("Close modal button works"),this.hienModalThem=!1},mo_modal_sua_chuc_vu(o){this.chucVuDangChinhSua={...o},this.hienModalSua=!0},dong_modal_sua_chuc_vu(){this.hienModalSua=!1}}},F={class:"container"},j={class:"container__action"},z={class:"container__add"},H={class:"container__table"},R={border:"1"},q=["onClick"],G=["onClick"];function J(o,t,c,a,i,s){const n=T("them-chuc-vu-modal"),S=T("sua-chuc-vu-modal");return _(),d("div",F,[t[3]||(t[3]=e("h1",null,"Chá»©c vá»¥",-1)),e("div",j,[e("div",z,[t[1]||(t[1]=e("b",null,"ThÃªm chá»©c vá»¥",-1)),e("button",{onClick:t[0]||(t[0]=(...l)=>s.mo_modal_them_chuc_vu&&s.mo_modal_them_chuc_vu(...l))},"â•")]),g(n,{isOpen:i.hienModalThem,onClose:s.dong_modal_them_chuc_vu,onSave:s.goi_api_them_chuc_vu},null,8,["isOpen","onClose","onSave"]),e("div",H,[e("table",R,[t[2]||(t[2]=e("thead",null,[e("tr",null,[e("th",null,"STT"),e("th",null,"MÃ£ chá»©c vá»¥"),e("th",null,"TÃªn chá»©c vá»¥"),e("th",null,"Sá»‘ tiáº¿t Ä‘Æ°á»£c miá»…n"),e("th",null,"Sá»­a"),e("th",null,"XÃ³a")])],-1)),e("tbody",null,[(_(!0),d(b,null,x(i.danhSachChucVu,(l,M)=>(_(),d("tr",{key:l.MaCV},[e("td",null,m(M+1),1),e("td",null,m(l.MaCV),1),e("td",null,m(l.TenCV),1),e("td",null,m(l.SoTietMien),1),e("td",null,[e("button",{onClick:k=>s.mo_modal_sua_chuc_vu(l)},"âœï¸",8,q)]),e("td",null,[e("button",{onClick:k=>s.goi_api_xoa_nhiem_vu(l.MaCV)},"ğŸ—‘ï¸",8,G)])]))),128))])])]),g(S,{isOpen:i.hienModalSua,chucVu:i.chucVuDangChinhSua,onClose:s.dong_modal_sua_chuc_vu,onSave:s.goi_api_sua_chuc_vu},null,8,["isOpen","chucVu","onClose","onSave"])])])}const Z=f(I,[["render",J],["__scopeId","data-v-dd36dc45"]]);export{Z as default};
