import{_ as C,b as _,A as g,c as d,d as K,a as t,e as u,w as r,f,F as M,g as T,v as p,o as m,t as y,y as k,z as v,S as l}from"./index-DsFX8v4I.js";/* empty css                     *//* empty css                   */const H={props:{isOpen:Boolean},data(){return{Khoi:"",MaNhom:"",HocKy:"",MaMon:"",SoTietTuan:"",danhSachNhomMonHoc:[],danhSachMonHoc:[]}},async created(){await this.hien_danh_sach_nhom_mon_hoc(),await this.hien_danh_sach_mon_hoc()},methods:{async hien_danh_sach_nhom_mon_hoc(){try{const n=await _.get(`${g}/nhom-mon-hoc/danh-sach-nhom-mon-hoc`);n.data.success&&(this.danhSachNhomMonHoc=n.data.data)}catch(n){throw console.log("L·ªói l·∫•y API ds nh√≥m m√¥n:",n),n}},async hien_danh_sach_mon_hoc(){try{const n=await _.get(`${g}/mon-hoc/danh-sach-mon-hoc`);n.data.success&&(this.danhSachMonHoc=n.data.data)}catch(n){throw console.log("L·ªói l·∫•y API ds m√¥n:",n),n}},kiem_tra_so_tiet(){this.SoTietTuan<1&&(this.SoTietTuan=1)},kiem_tra_so_am(n){(n.key==="-"||n.key==="e"||n.key==="E")&&n.preventDefault()},clear_form(){this.Khoi="",this.MaNhom="",this.HocKy="",this.MaMon="",this.SoTietTuan=""},them_chuong_trinh(){if(this.SoTietTuan<=0){Swal.fire({title:"S·ªë ti·∫øt kh√¥ng h·ª£p l·ªá!",text:"S·ªë ti·∫øt trong tu·∫ßn ph·∫£i l·ªõn h∆°n 0",icon:"error",confirmButtonText:"OK",confirmButtonColor:"#3085d6"});return}if(!this.HocKy||!this.Khoi||!this.MaMon||!this.MaNhom||!this.SoTietTuan){Swal.fire({title:"Thi·∫øu th√¥ng tin!",text:"Vui l√≤ng nh·∫≠p ƒë·ªß th√¥ng tin tr∆∞·ªõc khi l∆∞u.",icon:"warning",confirmButtonText:"OK",confirmButtonColor:"#3085d6"});return}const n={Khoi:this.Khoi,MaNhom:this.MaNhom,HocKy:this.HocKy,MaMon:this.MaMon,SoTietTuan:this.SoTietTuan};this.$emit("save",n),this.clear_form()}}},x={key:0,class:"modal-overlay"},w={class:"add-modal"},B={class:"add-modal__content"},D={for:""},$=["value"],U={for:""},L=["value"],P={for:""},V={for:""},O={for:""},A={class:"modal-actions"};function I(n,o,a,c,i,h){return a.isOpen?(m(),d("div",x,[t("div",w,[t("div",B,[o[18]||(o[18]=t("h2",null,"Th√™m ch∆∞∆°ng tr√¨nh",-1)),t("label",D,[o[10]||(o[10]=u(" Nh√≥m m√¥n h·ªçc: ")),r(t("select",{"onUpdate:modelValue":o[0]||(o[0]=e=>i.MaNhom=e)},[o[9]||(o[9]=t("option",{disabled:"",value:""},"-- Ch·ªçn nh√≥m m√¥n h·ªçc --",-1)),(m(!0),d(M,null,T(i.danhSachNhomMonHoc,e=>(m(),d("option",{key:e.MaNhom,value:e.MaNhom},y(e.TenNhom),9,$))),128))],512),[[f,i.MaNhom]])]),t("label",U,[o[12]||(o[12]=u(" M√¥n h·ªçc: ")),r(t("select",{"onUpdate:modelValue":o[1]||(o[1]=e=>i.MaMon=e)},[o[11]||(o[11]=t("option",{disabled:"",value:""},"-- Ch·ªçn m√¥n h·ªçc --",-1)),(m(!0),d(M,null,T(i.danhSachMonHoc,e=>(m(),d("option",{key:e.MaMon,value:e.MaMon},y(e.TenMon),9,L))),128))],512),[[f,i.MaMon]])]),t("label",P,[o[14]||(o[14]=u(" Kh·ªëi: ")),r(t("select",{"onUpdate:modelValue":o[2]||(o[2]=e=>i.Khoi=e),name:"",id:""},o[13]||(o[13]=[t("option",{disabled:"",value:""},"-- Ch·ªçn kh·ªëi --",-1),t("option",{value:"10"},"10",-1),t("option",{value:"11"},"11",-1),t("option",{value:"12"},"12",-1)]),512),[[f,i.Khoi]])]),t("label",V,[o[16]||(o[16]=u(" H·ªçc k·ª≥: ")),r(t("select",{"onUpdate:modelValue":o[3]||(o[3]=e=>i.HocKy=e)},o[15]||(o[15]=[t("option",{disabled:"",value:""},"-- Ch·ªçn h·ªçc k·ª≥ --",-1),t("option",{value:"1"},"1",-1),t("option",{value:"2"},"2",-1)]),512),[[f,i.HocKy]])]),t("label",O,[o[17]||(o[17]=u(" S·ªë ti·∫øt trong tu·∫ßn: ")),r(t("input",{"onUpdate:modelValue":o[4]||(o[4]=e=>i.SoTietTuan=e),type:"number",min:"1",max:"99",onKeydown:o[5]||(o[5]=(...e)=>h.kiem_tra_so_am&&h.kiem_tra_so_am(...e)),onInput:o[6]||(o[6]=(...e)=>h.kiem_tra_so_tiet&&h.kiem_tra_so_tiet(...e))},null,544),[[p,i.SoTietTuan]])]),t("div",A,[t("button",{onClick:o[7]||(o[7]=e=>n.$emit("close"))},"ƒê√≥ng"),t("button",{onClick:o[8]||(o[8]=(...e)=>h.them_chuong_trinh&&h.them_chuong_trinh(...e))},"Th√™m")])])])])):K("",!0)}const X=C(H,[["render",I]]),E={props:{isOpen:Boolean,chuongTrinh:Object},data(){return{HocKy:"",Khoi:"",MaNhom:"",TenNhom:"",MaMon:"",TenMon:"",SoTietTuan:""}},watch:{chuongTrinh:{immediate:!0,deep:!0,handler(n){n&&(this.HocKy=n.HocKy||"",this.Khoi=n.Khoi||"",this.MaNhom=n.MaNhom||"",this.TenNhom=n.TenNhom||"",this.MaMon=n.MaMon||"",this.TenMon=n.TenMon||"",this.SoTietTuan=n.SoTietTuan||"")}}},methods:{luu_thong_tin(){const n={Khoi:this.Khoi,MaNhom:this.MaNhom,HocKy:this.HocKy,MaMon:this.MaMon,SoTietTuan:this.SoTietTuan};this.$emit("save",n)}}},F={key:0,class:"modal-overlay"},j={class:"edit-modal"},z={class:"edit-modal__content"},R={for:""},Y={for:""},q={for:""},G={for:""},J={for:""},Q={class:"modal-actions"};function W(n,o,a,c,i,h){return a.isOpen?(m(),d("div",F,[t("div",j,[t("div",z,[o[12]||(o[12]=t("h2",null,"S·ª≠a ch∆∞∆°ng tr√¨nh",-1)),t("label",R,[o[7]||(o[7]=u(" H·ªçc k·ª≥: ")),r(t("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>i.HocKy=e),disabled:"",type:"text"},null,512),[[p,i.HocKy]])]),t("label",Y,[o[8]||(o[8]=u(" Kh·ªëi: ")),r(t("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>i.Khoi=e),disabled:"",type:"text"},null,512),[[p,i.Khoi]])]),t("label",q,[o[9]||(o[9]=u(" Nh√≥m m√¥n h·ªçc: ")),r(t("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>i.TenNhom=e),disabled:"",type:"text"},null,512),[[p,i.TenNhom]])]),t("label",G,[o[10]||(o[10]=u(" M√¥n h·ªçc: ")),r(t("input",{"onUpdate:modelValue":o[3]||(o[3]=e=>i.TenMon=e),disabled:"",type:"text"},null,512),[[p,i.TenMon]])]),t("label",J,[o[11]||(o[11]=u(" S·ªë ti·∫øt trong tu·∫ßn: ")),r(t("input",{"onUpdate:modelValue":o[4]||(o[4]=e=>i.SoTietTuan=e),type:"number"},null,512),[[p,i.SoTietTuan]])]),t("div",Q,[t("button",{onClick:o[5]||(o[5]=e=>n.$emit("close"))},"ƒê√≥ng"),t("button",{onClick:o[6]||(o[6]=(...e)=>h.luu_thong_tin&&h.luu_thong_tin(...e))},"L∆∞u")])])])])):K("",!0)}const Z=C(E,[["render",W]]),oo={components:{ThemChuongTrinhVue:X,SuaChuongTrinhVue:Z},data(){return{NamHoc:"",HocKy:"",hocKyDuocChon:"",khoiDuocChon:"",danhSachChuongTrinh:[],hienModalThem:!1,hienModalSua:!1,chuongTrinhDangChinhSua:null}},async created(){await this.lay_hoc_ky(),await this.lay_nam_hoc()},methods:{format_ngay(n){const o=n.getFullYear(),a=n.getMonth()+1,c=n.getDate();return`${o}-${a}-${c}`},async lay_nam_hoc(){const n=new Date;try{const o=await _.get(`${g}/nam-hoc/lay-nam-hoc-hien-tai?NgayHomNay=${this.format_ngay(n)}`);o.data&&(this.NamHoc=o.data.result.NamHoc)}catch(o){throw console.log("L·ªói l·∫•y API nƒÉm h·ªçc"),o}},async lay_hoc_ky(){const n=new Date;try{const o=await _.get(`${g}/hoc-ky/lay-hoc-ky-hien-tai?NgayHomNay=${this.format_ngay(n)}`);o.data&&(this.HocKy=o.data.data),this.hocKyDuocChon=this.HocKy}catch(o){throw console.log("L·ªói l·∫•y API h·ªçc k·ª≥",o),o}},async hien_danh_sach_chuong_trinh_theo_hoc_ky_va_khoi(n,o){try{const a=await _.get(`
                    ${g}/chuong-trinh/danh-sach-chuong-trinh-theo-hoc-ky-va-khoi?HocKy=${n}&Khoi=${o}
                `);a.data.success&&(this.danhSachChuongTrinh=a.data.data),console.log(this.danhSachChuongTrinh)}catch(a){throw console.log("L·ªói khi l·∫•y danh s√°ch ch tr√¨nh theo hk: ",a),a}},async goi_api_them_chuong_trinh(n){console.log(n);try{(await _.post(`
                    ${g}/chuong-trinh/them-chuong-trinh
                `,n)).data.success?(l.fire({icon:"success",title:"Th√™m th√†nh c√¥ng!",text:"D·ªØ li·ªáu ƒë√£ ƒë∆∞·ª£c th√™m v√†o h·ªá th·ªëng.",showConfirmButton:!1,timer:1500,timerProgressBar:!0,toast:!0,position:"top-end",background:"#f0fff4",iconColor:"#2ecc71",customClass:{popup:"success-toast",title:"success-title",content:"success-content"}}),this.hien_danh_sach_chuong_trinh_theo_hoc_ky_va_khoi(this.hocKyDuocChon,this.khoiDuocChon),this.hienModalThem=!1):l.fire({icon:"error",title:"Th√™m th·∫•t b·∫°i!",text:"Kh√¥ng th·ªÉ th√™m d·ªØ li·ªáu v√†o h·ªá th·ªëng.",showConfirmButton:!1,timer:1500,timerProgressBar:!0,toast:!0,position:"top-end",background:"#fff1f2",iconColor:"#e74c3c",customClass:{popup:"error-toast",title:"error-title",content:"error-content"}})}catch(o){console.error(o),l.fire("L·ªói!","C√≥ l·ªói x·∫£y ra khi th√™m d·ªØ li·ªáu!")}},async goi_api_sua_chuong_trinh(n){const o=n.Khoi,a=n.MaNhom,c=n.HocKy,i=n.MaMon,h=n.SoTietTuan;console.log("Thong tin tu API: ",o,i,a,c,h);try{(await _.put(`
                    ${g}/chuong-trinh/sua-chuong-trinh?Khoi=${o}&MaNhom=${a}&HocKy=${c}&MaMon=${i}
                `,{SoTietTuan:h})).data.success?(l.fire({icon:"success",title:"S·ª≠a th√†nh c√¥ng!",text:"D·ªØ li·ªáu ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t th√†nh c√¥ng.",showConfirmButton:!1,timer:1500,timerProgressBar:!0,toast:!0,position:"top-end",background:"#f0fff4",iconColor:"#2ecc71",customClass:{popup:"success-toast",title:"success-title",content:"success-content"}}),this.hienModalSua=!1):l.fire({icon:"error",title:"S·ª≠a th·∫•t b·∫°i!",text:"Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t d·ªØ li·ªáu.",showConfirmButton:!1,timer:1500,timerProgressBar:!0,toast:!0,position:"top-end",background:"#fff1f2",iconColor:"#e74c3c",customClass:{popup:"error-toast",title:"error-title",content:"error-content"}})}catch(e){console.error(e),l.fire("L·ªói!","C√≥ l·ªói x·∫£y ra khi s·ª≠a d·ªØ li·ªáu!")}},async goi_api_xoa_chuong_trinh(n,o,a,c){if((await l.fire({title:"X√°c nh·∫≠n x√≥a",text:"B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a d·ªØ li·ªáu n√†y kh√¥ng?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"X√≥a",cancelButtonText:"H·ªßy"})).isConfirmed)try{(await _.delete(`
                    ${g}/chuong-trinh/xoa-chuong-trinh?Khoi=${n}&MaNhom=${o}&HocKy=${a}&MaMon=${c}
                `)).data.success?(l.fire({icon:"success",title:"X√≥a th√†nh c√¥ng!",text:"D·ªØ li·ªáu ƒë√£ ƒë∆∞·ª£c x√≥a kh·ªèi h·ªá th·ªëng.",showConfirmButton:!1,timer:1500,timerProgressBar:!0,toast:!0,position:"top-end",background:"#f0fff4",iconColor:"#2ecc71",customClass:{popup:"success-toast",title:"success-title",content:"success-content"}}),this.hien_danh_sach_chuong_trinh_theo_hoc_ky_va_khoi(this.hocKyDuocChon,this.khoiDuocChon)):l.fire({icon:"error",title:"X√≥a th·∫•t b·∫°i!",text:"Kh√¥ng th·ªÉ x√≥a d·ªØ li·ªáu kh·ªèi h·ªá th·ªëng.",showConfirmButton:!1,timer:1500,timerProgressBar:!0,toast:!0,position:"top-end",background:"#fff1f2",iconColor:"#e74c3c",customClass:{popup:"error-toast",title:"error-title",content:"error-content"}})}catch(h){console.error(h),l.fire("L·ªói!","C√≥ l·ªói x·∫£y ra khi x√≥a d·ªØ li·ªáu!")}},async hien_thong_tin(n,o){await this.hien_danh_sach_chuong_trinh_theo_hoc_ky_va_khoi(n,o)},mo_modal_them_chuong_trinh(){this.hienModalThem=!0},dong_modal_them_chuong_trinh(){this.hienModalThem=!1},mo_modal_sua_chuong_trinh(n){this.chuongTrinhDangChinhSua={...n},this.hienModalSua=!0},dong_modal_sua_chuong_trinh(){this.hienModalSua=!1}}},to={class:"container"},no={class:"container__action"},eo={class:"container__add"},io={class:"container__filter"},ho={for:""},so={for:""},ao={class:"container__table"},ro=["onClick"],lo=["onClick"];function uo(n,o,a,c,i,h){const e=v("them-chuong-trinh-vue"),S=v("sua-chuong-trinh-vue");return m(),d("div",to,[o[10]||(o[10]=t("h1",null,"Ch∆∞∆°ng tr√¨nh",-1)),t("div",no,[t("div",eo,[o[4]||(o[4]=t("b",null,"Th√™m ch∆∞∆°ng tr√¨nh",-1)),t("button",{onClick:o[0]||(o[0]=(...s)=>h.mo_modal_them_chuong_trinh&&h.mo_modal_them_chuong_trinh(...s))},"‚ûï")]),k(e,{isOpen:i.hienModalThem,onSave:h.goi_api_them_chuong_trinh,onClose:h.dong_modal_them_chuong_trinh},null,8,["isOpen","onSave","onClose"]),t("div",io,[t("label",ho,[o[6]||(o[6]=t("b",null,"Kh·ªëi",-1)),r(t("select",{"onUpdate:modelValue":o[1]||(o[1]=s=>i.khoiDuocChon=s),name:"",id:""},o[5]||(o[5]=[t("option",{disabled:"",value:""},"-- Ch·ªçn kh·ªëi --",-1),t("option",{value:"10"},"10",-1),t("option",{value:"11"},"11",-1),t("option",{value:"12"},"12",-1)]),512),[[f,i.khoiDuocChon]])]),t("label",so,[o[8]||(o[8]=t("b",null,"H·ªçc k·ª≥",-1)),r(t("select",{"onUpdate:modelValue":o[2]||(o[2]=s=>i.hocKyDuocChon=s),id:""},o[7]||(o[7]=[t("option",{disabled:"",value:""},"-- Ch·ªçn h·ªçc k·ª≥ --",-1),t("option",{value:"1"},"1",-1),t("option",{value:"2"},"2",-1)]),512),[[f,i.hocKyDuocChon]])]),t("button",{id:"filter-button",onClick:o[3]||(o[3]=s=>h.hien_thong_tin(this.hocKyDuocChon,this.khoiDuocChon))}," Li·ªát k√™ ")])]),t("div",ao,[t("table",null,[o[9]||(o[9]=t("thead",null,[t("tr",null,[t("th",null,"STT"),t("th",null,"T√™n nh√≥m"),t("th",null,"T√™n m√¥n"),t("th",null,"S·ªë ti·∫øt tu·∫ßn"),t("th",null,"S·ª≠a"),t("th",null,"X√≥a")])],-1)),t("tbody",null,[(m(!0),d(M,null,T(i.danhSachChuongTrinh,(s,b)=>(m(),d("tr",{key:`${s.MaMon}-${s.MaNhom}-${s.HocKy}`},[t("td",null,y(b+1),1),t("td",null,y(s.TenNhom),1),t("td",null,y(s.TenMon),1),t("td",null,y(s.SoTietTuan),1),t("td",null,[t("button",{onClick:N=>h.mo_modal_sua_chuong_trinh(s)},"‚úèÔ∏è",8,ro)]),t("td",null,[t("button",{onClick:N=>h.goi_api_xoa_chuong_trinh(s.Khoi,s.MaNhom,s.HocKy,s.MaMon)},"üóëÔ∏è",8,lo)])]))),128))])])]),k(S,{isOpen:i.hienModalSua,chuongTrinh:i.chuongTrinhDangChinhSua,onSave:h.goi_api_sua_chuong_trinh,onClose:h.dong_modal_sua_chuong_trinh},null,8,["isOpen","chuongTrinh","onSave","onClose"])])}const go=C(oo,[["render",uo],["__scopeId","data-v-a7038b10"]]);export{go as default};
