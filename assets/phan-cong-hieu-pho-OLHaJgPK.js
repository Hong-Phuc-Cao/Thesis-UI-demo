import{_ as V,c as r,a,w as H,d as C,f as S,F as T,g,e as p,t as _,b as M,A as d,S as m,o as l,B as K,n as y}from"./index-DsFX8v4I.js";import{s as N,l as G,a as B}from"./so-sanh-nam-s7tHrirU.js";const f={data(){return{NamHoc:"",HocKy:"",danhSachNamHoc:[{NamHoc:"2021-2022"},{NamHoc:"2022-2023"},{NamHoc:"2023-2024"},{NamHoc:"2024-2025"}],danhSachToBoMon:[{MaBM:"BM001",TenBM:"Toán - tin"},{MaBM:"BM002",TenBM:"Ngữ Văn - GDCD"},{MaBM:"BM003",TenBM:"Lịch Sử - Địa Lý"},{MaBM:"BM004",TenBM:"Vật Lý - Hóa Học"},{MaBM:"BM005",TenBM:"Sinh Học - Công Nghệ"}],namHocDuocChon:"",danhSachGiaoVien:[{MaGV:"GV001",HoTenGV:"Nguyễn Văn A"},{MaGV:"GV002",HoTenGV:"Nguyễn Văn B"},{MaGV:"GV003",HoTenGV:"Nguyễn Văn C"},{MaGV:"GV004",HoTenGV:"Nguyễn Văn D"},{MaGV:"GV005",HoTenGV:"Nguyễn Văn E"}],MaBM:"",toBoMonDuocChon:"",TenBM:"",SoTietChuan:"17",danhSachMon:[{MaMon:"MON01",TenMon:"Toán"},{MaMon:"MON02",TenMon:"Tin Học"}],danhSachLop:[{TenLop:"10A1"},{TenLop:"10A2"},{TenLop:"10A3"},{TenLop:"10A4"},{TenLop:"10A5"},{TenLop:"11A1"},{TenLop:"11A2"},{TenLop:"11A3"},{TenLop:"11A4"},{TenLop:"11A5"},{TenLop:"12A1"},{TenLop:"12A2"},{TenLop:"12A3"},{TenLop:"12A4"},{TenLop:"12A5"}],phanCong:[],phanCongBanDau:[],draggedTeacher:null,danhSachGiaoVienKiemNhiem:[],danhSachGiaoVienGiuChucVu:[],danhSachChuongTrinh:[{MaMon:"MON01",SoTietTuan:3,Khoi:"10",TenMon:"Toán",MaNhom:"",TenNhom:"",HocKy:"1",MaBM:"BM001"},{MaMon:"MON01",SoTietTuan:3,Khoi:"11",TenMon:"Toán",MaNhom:"",TenNhom:"",HocKy:"1",MaBM:"BM001"},{MaMon:"MON01",SoTietTuan:3,Khoi:"12",TenMon:"Toán",MaNhom:"",TenNhom:"",HocKy:"1",MaBM:"BM001"},{MaMon:"MON02",SoTietTuan:3,Khoi:"10",TenMon:"Toán",MaNhom:"",TenNhom:"",HocKy:"1",MaBM:"BM001"},{MaMon:"MON02",SoTietTuan:3,Khoi:"11",TenMon:"Toán",MaNhom:"",TenNhom:"",HocKy:"1",MaBM:"BM001"},{MaMon:"MON02",SoTietTuan:3,Khoi:"12",TenMon:"Toán",MaNhom:"",TenNhom:"",HocKy:"1",MaBM:"BM001"},{MaMon:"MON01",SoTietTuan:3,Khoi:"10",TenMon:"Toán",MaNhom:"",TenNhom:"",HocKy:"2",MaBM:"BM001"},{MaMon:"MON01",SoTietTuan:3,Khoi:"11",TenMon:"Toán",MaNhom:"",TenNhom:"",HocKy:"2",MaBM:"BM001"},{MaMon:"MON01",SoTietTuan:3,Khoi:"12",TenMon:"Toán",MaNhom:"",TenNhom:"",HocKy:"2",MaBM:"BM001"},{MaMon:"MON02",SoTietTuan:3,Khoi:"10",TenMon:"Toán",MaNhom:"",TenNhom:"",HocKy:"2",MaBM:"BM001"},{MaMon:"MON02",SoTietTuan:3,Khoi:"11",TenMon:"Toán",MaNhom:"",TenNhom:"",HocKy:"2",MaBM:"BM001"},{MaMon:"MON02",SoTietTuan:3,Khoi:"12",TenMon:"Toán",MaNhom:"",TenNhom:"",HocKy:"2",MaBM:"BM001"}],SoTuanHK1:"",SoTuanHK2:"",duocXoa:!1}},async created(){console.log("Hôm nay:",new Date);try{await this.lay_thong_tin_session(),this.NamHoc=await G(),this.HocKy=await B(),this.namHocDuocChon=this.NamHoc,await Promise.all([this.hien_danh_sach_giao_vien_theo_bo_mon(),this.hien_danh_sach_chuong_trinh(),this.lay_so_tuan_hoc_ky("1").then(n=>{this.SoTuanHK1=n}),this.lay_so_tuan_hoc_ky("2").then(n=>{this.SoTuanHK2=n})])}catch(n){console.error("Lỗi trong created:",n)}},methods:{async lay_thong_tin_session(){try{const t=await M.get(`${d}/dang-nhap/lay-thong-tin-session`,{withCredentials:!0});t.data.success&&(this.MaBM=t.data.thongTinSession.MaBM,this.TenBM=t.data.thongTinSession.TenBM)}catch(t){throw console.error(t),t}},async hien_thong_tin(t,n){console.log(this.NamHoc,this.HocKy),console.log("namhoc:",t);const c=N(this.NamHoc,t);console.log("ketqua:",c),this.duocXoa=c=="nam_sau"||c=="nam_hien_tai",await Promise.all([this.hien_danh_sach_lop(),this.hien_danh_sach_giao_vien_theo_bo_mon(),this.hien_danh_sach_mon_theo_to_bo_mon(),this.hien_danh_sach_phan_cong(t,"1",n),this.hien_danh_sach_phan_cong(t,"2",n),this.hien_danh_sach_giao_vien_giu_chuc_vu(t,"1",n),this.hien_danh_sach_giao_vien_giu_chuc_vu(t,"2",n),this.hien_danh_sach_giao_vien_kiem_nhiem(t,"1",n),this.hien_danh_sach_giao_vien_kiem_nhiem(t,"2",n),this.lay_so_tiet_chuan(t)])},async onDrop(t,n,c,i){if(t.preventDefault(),!!this.draggedTeacher)try{const{Khoi:h}=this.tachTenLop(n.TenLop),e=this.danhSachChuongTrinh.find(u=>u.MaMon===c.MaMon&&u.Khoi===h&&u.HocKy===i);if(!e||!e.SoTietTuan){m.fire("Lỗi!",`Không tìm thấy số tiết tuần cho môn ${c.TenMon} khối ${h}!`,"error");return}const o=e.SoTietTuan,s=this.phanCong.findIndex(u=>u.lop.TenLop===n.TenLop&&u.mon.MaMon===c.MaMon&&u.hocKy===i);s===-1?this.phanCong.push({maGV:this.draggedTeacher.MaGV,lop:{TenLop:n.TenLop},mon:{MaMon:c.MaMon,TenMon:c.TenMon},soTietTuan:o,hocKy:i}):this.phanCong[s]={...this.phanCong[s],maGV:this.draggedTeacher.MaGV,soTietTuan:o},this.draggedTeacher=null}catch(h){console.error("Lỗi trong onDrop:",h),m.fire("Lỗi!","Không thể thực hiện phân công!","error")}},removeAssignment(t,n,c){this.phanCong=this.phanCong.filter(i=>!(i.lop.TenLop==t.TenLop&&i.mon.MaMon==n.MaMon&&i.hocKy==c))},async hien_danh_sach_nam_hoc(){try{const t=await M.get(`${d}/nam-hoc/danh-sach-nam-hoc`);t.data.success&&(this.danhSachNamHoc=t.data.data)}catch(t){throw console.error(t),t}},async hien_danh_sach_to_bo_mon(){try{const t=await M.get(`${d}/bo-mon/danh-sach-bo-mon`);t.data.success&&(this.danhSachToBoMon=t.data.data),this.toBoMonDuocChon=this.MaBM}catch(t){throw console.error(t),t}},async lay_so_tiet_chuan(t){try{const n=await M.get(`${d}/nam-hoc/lay-so-tiet-chuan?NamHoc=${t}`);n.data.success&&(this.SoTietChuan=n.data.data[0].SoTietChuan)}catch(n){throw console.error(n),n}},async lay_so_tuan_hoc_ky(t){try{const n=await M.get(`${d}/hoc-ky/lay-so-tuan?HocKy=${t}`);if(n.data.success)return n.data.data[0].SoTuan}catch(n){throw console.error(n),n}},async hien_danh_sach_mon_theo_to_bo_mon(){if(!this.toBoMonDuocChon){console.error("Mã bộ môn không hợp lệ"),this.danhSachMon=[];return}try{const t=await M.get(`${d}/mon-hoc/danh-sach-mon-hoc-theo-bo-mon?MaBM=${this.toBoMonDuocChon}`);t.data.success&&(this.danhSachMon=t.data.data)}catch(t){throw console.error(t),t}},async hien_danh_sach_giao_vien_theo_bo_mon(){try{const t=await M.get(`${d}/giao-vien/danh-sach-giao-vien-bm?MaBM=${this.toBoMonDuocChon}`);t.data.success&&(this.danhSachGiaoVien=t.data.data)}catch(t){throw console.error(t),t}},async hien_danh_sach_lop(){try{const t=await M.get(`${d}/lop/danh-sach-lop?NamHoc=${this.namHocDuocChon}`);t.data.success&&(this.danhSachLop=t.data.data)}catch(t){throw console.error(t),t}},async hien_danh_sach_phan_cong(t,n,c){try{const i=await M.get(`
                    ${d}/giang-day/danh-sach-giang-day?NamHoc=${t}&HocKy=${n}&MaBM=${c}
                `);if(i.data.success){const h=i.data.danhSach.map(e=>({maGV:e.MaGV,lop:{TenLop:e.TenLop},mon:{MaMon:e.MaMon,TenMon:e.TenMon},soTietTuan:e.SoTietTuan,hocKy:n}));this.phanCong=[...this.phanCong.filter(e=>e.hocKy!=n),...h],this.phanCongBanDau=[...this.phanCongBanDau.filter(e=>e.hocKy!=n),...h]}}catch(i){throw console.error(i),i}},async hien_danh_sach_giao_vien_giu_chuc_vu(t,n,c){try{const i=await M.get(`
                    ${d}/giang-day/lay-so-tiet-mien-giu-chuc-vu?NamHoc=${t}&HocKy=${n}&MaBM=${c}
                `);if(i.data.success){const h=i.data.data.map(e=>({...e,HocKy:n,TenCV:e.TenCV||"Không giữ chức vụ"}));this.danhSachGiaoVienGiuChucVu=[...this.danhSachGiaoVienGiuChucVu.filter(e=>e.HocKy!=n),...h]}}catch(i){throw console.error(i),i}},async hien_danh_sach_giao_vien_kiem_nhiem(t,n,c){try{const i=await M.get(`
                    ${d}/giang-day/lay-so-tiet-mien-kiem-nhiem?NamHoc=${t}&HocKy=${n}&MaBM=${c}
                `);if(i.data.success){const h=i.data.data.map(e=>({...e,HocKy:n,TenNV:e.TenNV||"Không kiêm nhiệm"}));this.danhSachGiaoVienKiemNhiem=[...this.danhSachGiaoVienKiemNhiem.filter(e=>e.HocKy!==n),...h]}}catch(i){throw console.error(i),i}},async hien_danh_sach_chuong_trinh(){try{const t=await M.get(`${d}/chuong-trinh/danh-sach-chuong-trinh`);t.data.success&&(this.danhSachChuongTrinh=t.data.data.map(n=>({MaMon:n.MaMon,SoTietTuan:n.SoTietTuan,Khoi:n.Khoi,TenMon:n.TenMon,MaNhom:n.MaNhom,TenNhom:n.TenNhom,HocKy:n.HocKy,MaBM:n.MaBM})))}catch(t){throw console.error("Lỗi lấy danh sách chương trình:",t),t}},showPopup(t,n,c){if(c=="ChucVu"){const i=this.danhSachGiaoVienGiuChucVu.filter(o=>o.MaGV==t&&o.HocKy==n),h=i.length>0?i.map(o=>`<li>${o.TenCV} (${o.SoTietMien||0} tiết)</li>`).join(""):"<li>Không có chức vụ</li>",e=i.reduce((o,s)=>o+(s.SoTietMien||0),0);m.fire({title:`Thông tin chức vụ học kỳ ${n}`,html:`
                        <ul class="custom-list">
                            <li><strong>Mã giáo viên:</strong> ${t}</li>
                            <li><strong>Danh sách chức vụ:</strong>
                                <ul>${h}</ul>
                            </li>
                            <li><strong>Số tiết chức vụ:</strong> ${e}</li>
                        </ul>
                    `,icon:"info",confirmButtonText:"Đóng",customClass:{popup:"custom-popup"}})}else if(c=="KiemNhiem"){const i=this.danhSachGiaoVienKiemNhiem.filter(o=>o.MaGV==t&&o.HocKy==n),h=i.length>0?i.map(o=>`<li>${o.TenNV} (${o.SoTietMien||0} tiết)</li>`).join(""):"<li>Không có kiêm nhiệm</li>",e=i.reduce((o,s)=>o+(s.SoTietMien||0),0);m.fire({title:`Thông tin kiêm nhiệm học kỳ ${n}`,html:`
                        <ul class="custom-list">
                            <li><strong>Mã giáo viên:</strong> ${t}</li>
                            <li><strong>Danh sách kiêm nhiệm:</strong>
                                <ul>${h}</ul>
                            </li>
                            <li><strong>Tổng số tiết kiêm nhiệm:</strong> ${e}</li>
                        </ul>
                    `,icon:"info",confirmButtonText:"Đóng",customClass:{popup:"custom-popup"}})}else console.log("Có lỗi hiển thị thông tin bảng kết quả")},hien_so_tiet_mien_cv(t,n){return this.danhSachGiaoVienGiuChucVu.filter(i=>i.MaGV==t&&i.HocKy==n).reduce((i,h)=>i+(h.SoTietMien||0),0)},hien_so_tiet_mien_kn(t,n){return this.danhSachGiaoVienKiemNhiem.filter(i=>i.MaGV==t&&i.HocKy==n).reduce((i,h)=>i+(h.SoTietMien||0),0)},hien_so_tiet_phan_cong(t,n){return this.phanCong.filter(c=>c.maGV==t&&c.hocKy==n).reduce((c,i)=>c+(i.soTietTuan||0),0)},hien_tong_so_tiet(t,n){const c=this.hien_so_tiet_phan_cong(t,n),i=this.hien_so_tiet_mien_cv(t,n),h=this.hien_so_tiet_mien_kn(t,n);return c+i+h},hien_tong_so_tiet_vuot_gio(t){const n=this.hien_tong_so_tiet(t,"1"),c=this.hien_tong_so_tiet(t,"2"),i=this.SoTietChuan,h=this.SoTuanHK1,e=this.SoTuanHK2;return Math.max(0,(n-i)*h+(c-i)*e)},getAssignedTeacher(t,n,c){const i=this.phanCong.find(h=>h.lop.TenLop===t.TenLop&&h.mon.MaMon===n.MaMon&&h.hocKy===c);if(i){const h=this.danhSachGiaoVien.find(e=>e.MaGV===i.maGV);return h?`${h.MaGV} - ${h.HoTenGV}`:i.maGV}return null},async luu_phan_cong(){try{const t=["1","2"];for(const n of t){const c=this.phanCong.filter(e=>e.hocKy===n&&!this.phanCongBanDau.some(o=>o.lop.TenLop===e.lop.TenLop&&o.mon.MaMon===e.mon.MaMon&&o.hocKy===e.hocKy)),i=this.phanCong.filter(e=>{const o=this.phanCongBanDau.find(s=>s.lop.TenLop===e.lop.TenLop&&s.mon.MaMon===e.mon.MaMon&&s.hocKy===e.hocKy);return o&&o.maGV!==e.maGV&&e.hocKy===n}),h=this.phanCongBanDau.filter(e=>e.hocKy===n&&!this.phanCong.some(o=>o.lop.TenLop===e.lop.TenLop&&o.mon.MaMon===e.mon.MaMon&&o.hocKy===e.hocKy));for(const e of c){const{Khoi:o,KyHieu:s,STTLop:u}=this.tachTenLop(e.lop.TenLop);await M.post(`${d}/giang-day/them-giang-day`,{MaGV:e.maGV,MaMon:e.mon.MaMon,STTLop:u,Khoi:o,KyHieu:s,NamHoc:this.namHocDuocChon,HocKy:n},{withCredentials:!0})}for(const e of i){const{Khoi:o,KyHieu:s,STTLop:u}=this.tachTenLop(e.lop.TenLop);await M.put(`${d}/giang-day/sua-giang-day?MaMon=${e.mon.MaMon}&STTLop=${u}&Khoi=${o}&KyHieu=${s}&NamHoc=${this.namHocDuocChon}&HocKy=${n}`,{MaGV:e.maGV},{withCredentials:!0})}for(const e of h){const{Khoi:o,KyHieu:s,STTLop:u}=this.tachTenLop(e.lop.TenLop);await M.delete(`${d}/giang-day/xoa-giang-day?MaMon=${e.mon.MaMon}&STTLop=${u}&Khoi=${o}&KyHieu=${s}&NamHoc=${this.namHocDuocChon}&HocKy=${n}`,{withCredentials:!0})}}this.phanCongBanDau=[...this.phanCong],m.fire({icon:"success",title:"Lưu thành công!",text:"Dữ liệu đã được lưu vào hệ thống.",showConfirmButton:!1,timer:1500,timerProgressBar:!0,toast:!0,position:"top-end",background:"#f0fff4",iconColor:"#2ecc71",customClass:{popup:"success-toast",title:"success-title",content:"success-content"}})}catch(t){console.error("Lỗi lưu phân công:",t),m.fire("Lỗi!","Có lỗi xảy ra khi lưu dữ liệu!")}},tachTenLop(t){if(!t||typeof t!="string")throw new Error("TenLop không hợp lệ");const n=/^(\d+)([A-Z])(\d+)$/,c=t.match(n);if(!c)throw new Error(`TenLop "${t}" không đúng định dạng (VD: 10A3)`);return{Khoi:c[1],KyHieu:c[2],STTLop:c[3]}},dragStart(t,n){this.draggedTeacher=n,t.dataTransfer.setData("text/plain",n.MaGV)},tai_thong_ke(){this.luu_phan_cong();const t="Bảng thống kê phân công chuyên môn",n=["STT","Mã giáo viên","Họ tên giáo viên","Số tiết chuẩn","Số tiết CV (HK I)","Số tiết KN (HK I)","Số tiết dạy (HK I)","Số tiết CV (HK II)","Số tiết KN (HK II)","Số tiết dạy (HK II)","TS tiết HK I","TS tiết HK II","TS tiết vượt giờ"],c=this.danhSachGiaoVien.map((s,u)=>[u+1,s.MaGV,s.HoTenGV,this.SoTietChuan,this.hien_so_tiet_mien_cv(s.MaGV,"1"),this.hien_so_tiet_mien_kn(s.MaGV,"1"),this.hien_so_tiet_phan_cong(s.MaGV,"1"),this.hien_so_tiet_mien_cv(s.MaGV,"2"),this.hien_so_tiet_mien_kn(s.MaGV,"2"),this.hien_so_tiet_phan_cong(s.MaGV,"2"),this.hien_tong_so_tiet(s.MaGV,"1"),this.hien_tong_so_tiet(s.MaGV,"2"),this.hien_tong_so_tiet_vuot_gio(s.MaGV)]),i=[t,"",n.join(","),...c.map(s=>s.join(",")),"","Hiệu phó"].join(`
`),h=new Blob([i],{type:"text/csv;charset=utf-8;"}),e=document.createElement("a"),o=URL.createObjectURL(h);e.setAttribute("href",o),e.setAttribute("download",`PhanCong_${this.namHocDuocChon}.csv`),e.click(),URL.revokeObjectURL(o)}}},L={class:"container"},k={class:"container__action"},D={class:"container__filter"},w=["value"],b=["value"],v={class:"assignment-wrapper"},I={class:"teacher-list"},A=["onDragstart"],$={class:"assignment-table"},x={class:"semester-table"},O=["onDrop"],P={key:0,class:"assigned-teacher"},j=["onClick"],U={key:1,class:"empty-slot"},E={class:"semester-table"},R=["onDrop"],X={key:0,class:"assigned-teacher"},q=["onClick"],F={key:1,class:"empty-slot"},z={class:"result-table"},Q={border:"1"},Z={class:"table-display-other"},J={class:"table-display-other"},W={class:"table-display-other"},Y={class:"table-display-other"},nn=["onClick"],on=["onClick"],tn={class:"table-display-term1"},en=["onClick"],an=["onClick"],hn={class:"table-display-term2"},sn={class:"table-display-term1"},cn={class:"table-display-term2"},rn={class:"download-button"};function ln(t,n,c,i,h,e){return l(),r("div",L,[n[23]||(n[23]=a("h1",null,"Phân công chuyên môn",-1)),a("div",k,[a("div",D,[n[11]||(n[11]=a("b",null,"Năm học",-1)),H(a("select",{"onUpdate:modelValue":n[0]||(n[0]=o=>h.namHocDuocChon=o),name:"namHoc",id:"namHoc"},[n[9]||(n[9]=a("option",{disabled:"",value:""},"Chọn năm học",-1)),(l(!0),r(T,null,g(h.danhSachNamHoc,o=>(l(),r("option",{key:o.NamHoc,value:o.NamHoc},_(o.NamHoc),9,w))),128))],512),[[S,h.namHocDuocChon]]),n[12]||(n[12]=a("b",null,"Tổ bộ môn",-1)),H(a("select",{"onUpdate:modelValue":n[1]||(n[1]=o=>h.toBoMonDuocChon=o),name:"toBoMonDuocChon",id:"toBoMonDuocChon"},[n[10]||(n[10]=a("option",{disabled:"",value:""},"Chọn tổ bộ môn",-1)),(l(!0),r(T,null,g(h.danhSachToBoMon,o=>(l(),r("option",{key:o.MaBM,value:o.MaBM},_(o.TenBM),9,b))),128))],512),[[S,h.toBoMonDuocChon]]),a("button",{id:"filter-button",onClick:n[2]||(n[2]=o=>e.hien_thong_tin(h.namHocDuocChon,h.toBoMonDuocChon))}," Liệt kê "),h.duocXoa?(l(),r("button",{key:0,id:"save-button",onClick:n[3]||(n[3]=(...o)=>e.luu_phan_cong&&e.luu_phan_cong(...o))}," Lưu ")):C("",!0)])]),a("div",v,[a("div",I,[n[13]||(n[13]=a("h3",null,"Danh sách giáo viên",-1)),(l(!0),r(T,null,g(h.danhSachGiaoVien,o=>(l(),r("div",{class:"teacher-item",key:o.MaGV,draggable:"true",onDragstart:s=>e.dragStart(s,o)},_(o.MaGV)+" - "+_(o.HoTenGV),41,A))),128))]),a("div",$,[a("table",x,[n[15]||(n[15]=a("caption",null,"Học kỳ I",-1)),a("thead",null,[a("tr",null,[n[14]||(n[14]=a("th",null,"Lớp / Môn",-1)),(l(!0),r(T,null,g(h.danhSachMon,o=>(l(),r("th",{key:o.MaMon},_(o.TenMon),1))),128))])]),a("tbody",null,[(l(!0),r(T,null,g(h.danhSachLop,o=>(l(),r("tr",{key:o},[a("td",null,_(o.TenLop),1),(l(!0),r(T,null,g(h.danhSachMon,s=>(l(),r("td",{key:`${o.TenLop}-${s.MaMon}-1`,class:"assignment-cell",onDragover:n[4]||(n[4]=K(()=>{},["prevent"])),onDragenter:n[5]||(n[5]=K(()=>{},["prevent"])),onDrop:u=>e.onDrop(u,o,s,"1")},[e.getAssignedTeacher(o,s,"1")?(l(),r("div",P,[p(_(e.getAssignedTeacher(o,s,"1"))+" ",1),a("button",{onClick:u=>e.removeAssignment(o,s,"1")},"×",8,j)])):(l(),r("div",U,"   "))],40,O))),128))]))),128))])]),a("table",E,[n[17]||(n[17]=a("caption",null,"Học kỳ II",-1)),a("thead",null,[a("tr",null,[n[16]||(n[16]=a("th",null,"Lớp / Môn",-1)),(l(!0),r(T,null,g(h.danhSachMon,o=>(l(),r("th",{key:o.MaMon},_(o.TenMon),1))),128))])]),a("tbody",null,[(l(!0),r(T,null,g(h.danhSachLop,o=>(l(),r("tr",{key:o},[a("td",null,_(o.TenLop),1),(l(!0),r(T,null,g(h.danhSachMon,s=>(l(),r("td",{key:`${o.TenLop}-${s.MaMon}-2`,class:"assignment-cell",onDragover:n[6]||(n[6]=K(()=>{},["prevent"])),onDragenter:n[7]||(n[7]=K(()=>{},["prevent"])),onDrop:u=>e.onDrop(u,o,s,"2")},[e.getAssignedTeacher(o,s,"2")?(l(),r("div",X,[p(_(e.getAssignedTeacher(o,s,"2"))+" ",1),a("button",{onClick:u=>e.removeAssignment(o,s,"2")},"×",8,q)])):(l(),r("div",F,"   "))],40,R))),128))]))),128))])])])]),a("div",z,[n[21]||(n[21]=a("h2",null,"Kết quả phân công",-1)),a("div",null,[n[18]||(n[18]=a("strong",null,"Số tuần HK 1: ",-1)),p(_(h.SoTuanHK1),1)]),a("div",null,[n[19]||(n[19]=a("strong",null,"Số tuần HK 2: ",-1)),p(" "+_(h.SoTuanHK2),1)]),n[22]||(n[22]=a("div",{class:"formula-info"},[a("strong",null,"Số tiết vượt giờ"),p(" = (Tổng tiết HK I - Số tiết chuẩn) * Số tuần HK I + (Tổng tiết HK II - Số tiết chuẩn) * Số tuần HK II ")],-1)),a("table",Q,[n[20]||(n[20]=a("thead",null,[a("tr",null,[a("th",null,"STT"),a("th",null,"Mã giáo viên"),a("th",null,"Họ tên giáo viên"),a("th",null,"Số tiết chuẩn"),a("th",null,"Số tiết CV HK I"),a("th",null,"Số tiết KN HK I"),a("th",null,"Số tiết dạy HK I"),a("th",null,"Số tiết CV HK II"),a("th",null,"Số tiết KN HK II"),a("th",null,"Số tiết dạy HK II"),a("th",null,"TS tiết HK I"),a("th",null,"TS tiết HK II"),a("th",null,"TS tiết vượt giờ")])],-1)),a("tbody",null,[(l(!0),r(T,null,g(h.danhSachGiaoVien,(o,s)=>(l(),r("tr",{key:o.MaGV},[a("td",Z,_(s+1),1),a("td",J,_(o.MaGV),1),a("td",W,_(o.HoTenGV),1),a("td",Y,_(h.SoTietChuan||0),1),a("td",{onClick:u=>e.showPopup(o.MaGV,"1","ChucVu"),class:y([{"red-text":e.hien_so_tiet_mien_cv(o.MaGV,"1")>0},"table-display-term1"])},_(e.hien_so_tiet_mien_cv(o.MaGV,"1")),11,nn),a("td",{onClick:u=>e.showPopup(o.MaGV,"1","KiemNhiem"),class:y([{"red-text":e.hien_so_tiet_mien_kn(o.MaGV,"1")>0},"table-display-term1"])},_(e.hien_so_tiet_mien_kn(o.MaGV,"1")),11,on),a("td",tn,_(e.hien_so_tiet_phan_cong(o.MaGV,"1")),1),a("td",{onClick:u=>e.showPopup(o.MaGV,"2","ChucVu"),class:y([{"red-text":e.hien_so_tiet_mien_cv(o.MaGV,"2")>0},"table-display-term2"])},_(e.hien_so_tiet_mien_cv(o.MaGV,"2")),11,en),a("td",{onClick:u=>e.showPopup(o.MaGV,"2","KiemNhiem"),class:y([{"red-text":e.hien_so_tiet_mien_kn(o.MaGV,"2")>0},"table-display-term2"])},_(e.hien_so_tiet_mien_kn(o.MaGV,"2")),11,an),a("td",hn,_(e.hien_so_tiet_phan_cong(o.MaGV,"2")),1),a("td",sn,_(e.hien_tong_so_tiet(o.MaGV,"1")),1),a("td",cn,_(e.hien_tong_so_tiet(o.MaGV,"2")),1),a("td",{class:y([{"red-text":e.hien_tong_so_tiet_vuot_gio(o.MaGV)>200},"table-display-other"])},_(e.hien_tong_so_tiet_vuot_gio(o.MaGV)),3)]))),128))])]),a("div",rn,[a("button",{onClick:n[8]||(n[8]=(...o)=>e.tai_thong_ke&&e.tai_thong_ke(...o))}," Tải thống kê ")])])])}const Mn=V(f,[["render",ln],["__scopeId","data-v-f6838787"]]);export{Mn as default};
