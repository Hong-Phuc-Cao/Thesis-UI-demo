import{_ as g,S as r,b as h,A as m,c,d as N,a as e,e as v,w as p,v as f,o as d,y as T,z as V,F as b,g as k,t as _}from"./index-DsFX8v4I.js";/* empty css                     *//* empty css                   */const x={props:{isOpen:Boolean},data(){return{MaNV:"",TenNV:"",SoTietMien:""}},methods:{async tao_ma_nhiem_vu(){try{const n=await h.get(`
                    ${m}/nhiem-vu/danh-sach-nhiem-vu
                `);if(!n.data.success)throw new Error("Lá»—i khi láº¥y danh sÃ¡ch giÃ¡o viÃªn");const t=n.data.data;let a=0;t.forEach(s=>{const i=s.MaNV.match(/\d+/);if(i){const o=parseInt(i[0],10);o>a&&(a=o)}});const l=a+1;return l<10?`NV00${l}`:l<100?`NV0${l}`:`NV${l}`}catch(n){return console.error("Lá»—i khi táº¡o mÃ£ nhiá»‡m vá»¥:",n),"NV001"}},async them_nhiem_vu(){if(!this.TenNV||!this.SoTietMien){r.fire({title:"Thiáº¿u thÃ´ng tin!",text:"Vui lÃ²ng nháº­p Ä‘á»§ thÃ´ng tin trÆ°á»›c khi lÆ°u.",icon:"warning",confirmButtonText:"OK",confirmButtonColor:"#3085d6"});return}const t={MaNV:await this.tao_ma_nhiem_vu(),TenNV:this.TenNV,SoTietMien:this.SoTietMien};this.$emit("save",t)}}},y={key:0,class:"modal-overlay"},w={class:"add-modal"},B={class:"add-modal__content"},$={class:"modal-actions"};function O(n,t,a,l,s,i){return a.isOpen?(d(),c("div",y,[e("div",w,[e("div",B,[t[6]||(t[6]=e("h2",null,"ThÃªm nhiá»‡m vá»¥",-1)),e("label",null,[t[4]||(t[4]=v(" TÃªn nhiá»‡m vá»¥: ")),p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.TenNV=o),type:"text"},null,512),[[f,s.TenNV]])]),e("label",null,[t[5]||(t[5]=v(" Sá»‘ tiáº¿t Ä‘Æ°á»£c miá»…n: ")),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.SoTietMien=o),type:"number",name:"",id:"",min:"0"},null,512),[[f,s.SoTietMien]])]),e("div",$,[e("button",{onClick:t[2]||(t[2]=o=>n.$emit("close"))},"ÄÃ³ng"),e("button",{onClick:t[3]||(t[3]=(...o)=>i.them_nhiem_vu&&i.them_nhiem_vu(...o))},"ThÃªm")])])])])):N("",!0)}const L=g(x,[["render",O]]),D={props:{isOpen:Boolean,nhiemVu:Object},data(){return{MaNV:"",TenNV:"",SoTietMien:""}},watch:{nhiemVu:{immediate:!0,deep:!0,handler(n){n&&(this.TenNV=n.TenNV||"",this.SoTietMien=n.SoTietMien||"")}}},methods:{luu_thong_tin(){const n={MaNV:this.nhiemVu.MaNV,TenNV:this.TenNV,SoTietMien:this.SoTietMien};this.$emit("save",n)}}},P={key:0,class:"modal-overlay"},U={class:"edit-modal"},X={class:"edit-modal__content"},E={class:"modal-actions"};function K(n,t,a,l,s,i){return a.isOpen?(d(),c("div",P,[e("div",U,[e("div",X,[t[6]||(t[6]=e("h2",null,"Sá»­a nhiá»‡m vá»¥",-1)),e("label",null,[t[4]||(t[4]=v(" TÃªn nhiá»‡m vá»¥: ")),p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.TenNV=o),type:"text"},null,512),[[f,s.TenNV]])]),e("label",null,[t[5]||(t[5]=v(" Sá»‘ tiáº¿t Ä‘Æ°á»£c miá»…n: ")),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.SoTietMien=o),type:"number"},null,512),[[f,s.SoTietMien]])]),e("div",E,[e("button",{onClick:t[2]||(t[2]=o=>n.$emit("close"))},"ÄÃ³ng"),e("button",{onClick:t[3]||(t[3]=(...o)=>i.luu_thong_tin&&i.luu_thong_tin(...o))},"LÆ°u")])])])])):N("",!0)}const A=g(D,[["render",K]]),I={components:{ThemNhiemVuModalVue:L,SuaNhiemVuModalVue:A},data(){return{danhSachNhiemVu:[],hienModalThem:!1,hienModalSua:!1,nhiemVuDangChinhSua:null}},async created(){await this.hien_danh_sach_nhiem_vu()},methods:{async hien_danh_sach_nhiem_vu(){try{const n=await h.get(`
                    ${m}/nhiem-vu/danh-sach-nhiem-vu
                `);n.data.success&&(this.danhSachNhiemVu=n.data.data)}catch(n){console.error("Lá»—i khi láº¥y danh sÃ¡ch nhiá»‡m vá»¥:",n)}},async goi_api_them_nhiem_vu(n){console.log("Nhiá»‡m vá»¥ tá»« modal:"),console.log(n);try{(await h.post(`
                    ${m}/nhiem-vu/them-nhiem-vu    
                `,n)).data.success?(r.fire({icon:"success",title:"ThÃªm thÃ nh cÃ´ng!",text:"Dá»¯ liá»‡u Ä‘Ã£ Ä‘Æ°á»£c thÃªm vÃ o há»‡ thá»‘ng.",showConfirmButton:!1,timer:1500,timerProgressBar:!0,toast:!0,position:"top-end",background:"#f0fff4",iconColor:"#2ecc71",customClass:{popup:"success-toast",title:"success-title",content:"success-content"}}),await this.hien_danh_sach_nhiem_vu(),this.hienModalThem=!1):r.fire({icon:"error",title:"ThÃªm tháº¥t báº¡i!",text:"KhÃ´ng thá»ƒ thÃªm dá»¯ liá»‡u vÃ o há»‡ thá»‘ng.",showConfirmButton:!1,timer:1500,timerProgressBar:!0,toast:!0,position:"top-end",background:"#fff1f2",iconColor:"#e74c3c",customClass:{popup:"error-toast",title:"error-title",content:"error-content"}})}catch(t){console.error(t),r.fire("Lá»—i!","CÃ³ lá»—i xáº£y ra khi thÃªm dá»¯ liá»‡u!")}},async goi_api_sua_nhiem_vu(n){const t=n.MaNV,a={TenNV:n.TenNV,SoTietMien:n.SoTietMien};console.log(a);try{(await h.put(`
                    ${m}/nhiem-vu/sua-nhiem-vu?MaNV=${t}`,a)).data.success?(r.fire({icon:"success",title:"Sá»­a thÃ nh cÃ´ng!",text:"Dá»¯ liá»‡u Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t thÃ nh cÃ´ng.",showConfirmButton:!1,timer:1500,timerProgressBar:!0,toast:!0,position:"top-end",background:"#f0fff4",iconColor:"#2ecc71",customClass:{popup:"success-toast",title:"success-title",content:"success-content"}}),await this.hien_danh_sach_nhiem_vu(),this.hienModalSua=!1):r.fire({icon:"error",title:"Sá»­a tháº¥t báº¡i!",text:"KhÃ´ng thá»ƒ cáº­p nháº­t dá»¯ liá»‡u.",showConfirmButton:!1,timer:1500,timerProgressBar:!0,toast:!0,position:"top-end",background:"#fff1f2",iconColor:"#e74c3c",customClass:{popup:"error-toast",title:"error-title",content:"error-content"}})}catch(l){console.error("Lá»—i khi cáº­p nháº­t nhiá»‡m vá»¥:",l),r.fire("Lá»—i!","CÃ³ lá»—i xáº£y ra khi sá»­a dá»¯ liá»‡u!")}},async goi_api_xoa_nhiem_vu(n){if((await r.fire({title:"XÃ¡c nháº­n xÃ³a",text:"Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a dá»¯ liá»‡u nÃ y khÃ´ng?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"XÃ³a",cancelButtonText:"Há»§y"})).isConfirmed)try{(await h.delete(`
                        ${m}/nhiem-vu/xoa-nhiem-vu?MaNV=${n}
                    `)).data.success?(r.fire({icon:"success",title:"XÃ³a thÃ nh cÃ´ng!",text:"Dá»¯ liá»‡u Ä‘Ã£ Ä‘Æ°á»£c xÃ³a khá»i há»‡ thá»‘ng.",showConfirmButton:!1,timer:1500,timerProgressBar:!0,toast:!0,position:"top-end",background:"#f0fff4",iconColor:"#2ecc71",customClass:{popup:"success-toast",title:"success-title",content:"success-content"}}),await this.hien_danh_sach_nhiem_vu()):r.fire({icon:"error",title:"XÃ³a tháº¥t báº¡i!",text:"KhÃ´ng thá»ƒ xÃ³a dá»¯ liá»‡u khá»i há»‡ thá»‘ng.",showConfirmButton:!1,timer:1500,timerProgressBar:!0,toast:!0,position:"top-end",background:"#fff1f2",iconColor:"#e74c3c",customClass:{popup:"error-toast",title:"error-title",content:"error-content"}})}catch(a){console.log(a),r.fire("Lá»—i!","CÃ³ lá»—i xáº£y ra khi xÃ³a dá»¯ liá»‡u!")}},mo_modal_them_nhiem_vu(){console.log("Open modal button works"),this.hienModalThem=!0},dong_modal_them_nhiem_vu(){console.log("Close modal button works"),this.hienModalThem=!1},mo_modal_sua_nhiem_vu(n){this.nhiemVuDangChinhSua={...n},this.hienModalSua=!0},dong_modal_sua_nhiem_vu(){this.hienModalSua=!1}}},F={class:"container"},j={class:"container__action"},z={class:"container__add"},H={class:"container__table"},R={border:"1"},q=["onClick"],G=["onClick"];function J(n,t,a,l,s,i){const o=V("them-nhiem-vu-modal-vue"),M=V("sua-nhiem-vu-modal-vue");return d(),c("div",F,[t[3]||(t[3]=e("h1",null,"Nhiá»‡m vá»¥",-1)),e("div",j,[e("div",z,[t[1]||(t[1]=e("b",null,"ThÃªm nhiá»‡m vá»¥",-1)),e("button",{onClick:t[0]||(t[0]=(...u)=>i.mo_modal_them_nhiem_vu&&i.mo_modal_them_nhiem_vu(...u))},"â•")]),T(o,{isOpen:s.hienModalThem,onClose:i.dong_modal_them_nhiem_vu,onSave:i.goi_api_them_nhiem_vu},null,8,["isOpen","onClose","onSave"]),e("div",H,[e("table",R,[t[2]||(t[2]=e("thead",null,[e("tr",null,[e("th",null,"STT"),e("th",null,"MÃ£ nhiá»‡m vá»¥"),e("th",null,"TÃªn nhiá»‡m vá»¥"),e("th",null,"Sá»‘ tiáº¿t Ä‘Æ°á»£c miá»…n"),e("th",null,"Sá»­a"),e("th",null,"XÃ³a")])],-1)),e("tbody",null,[(d(!0),c(b,null,k(s.danhSachNhiemVu,(u,S)=>(d(),c("tr",{key:u.MaNV},[e("td",null,_(S+1),1),e("td",null,_(u.MaNV),1),e("td",null,_(u.TenNV),1),e("td",null,_(u.SoTietMien),1),e("td",null,[e("button",{onClick:C=>i.mo_modal_sua_nhiem_vu(u)},"âœï¸",8,q)]),e("td",null,[e("button",{onClick:C=>i.goi_api_xoa_nhiem_vu(u.MaNV)},"ğŸ—‘ï¸",8,G)])]))),128))])]),T(M,{isOpen:s.hienModalSua,nhiemVu:s.nhiemVuDangChinhSua,onClose:i.dong_modal_sua_nhiem_vu,onSave:i.goi_api_sua_nhiem_vu},null,8,["isOpen","nhiemVu","onClose","onSave"])])])])}const Z=g(I,[["render",J],["__scopeId","data-v-9c21266c"]]);export{Z as default};
