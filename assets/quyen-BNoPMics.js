import{_ as T,S as h,b as c,A as d,c as l,d as y,a as t,e as m,w as f,v as C,F as p,g as M,f as k,o as u,t as r,y as Q,z as b}from"./index-DsFX8v4I.js";const x={props:{isOpen:Boolean},data(){return{hienKetQua:!1,MaGV:"",MaQuyen:"",namHocDuocChon:"",hocKyDuocChon:"",danhSachQuyen:[],tuKhoaTimKiem:"",ketQuaTimKiem:[]}},async created(){await this.goi_api_lay_danh_sach_quyen()},methods:{async goi_api_lay_danh_sach_quyen(){try{const n=await c.get(`${d}/quyen/danh-sach-quyen`);n.data.success&&(console.log("Pháº£n há»“i sá»§a API: ",n.data.data),this.danhSachQuyen=n.data.data)}catch(n){console.log(n)}},async goi_api_tim_giao_vien(){this.hienKetQua=!0,console.log(this.tuKhoaTimKiem),this.MaGV="";try{const n=await c.get(`
                    ${d}/giao-vien/tim-giao-vien?keyword=${this.tuKhoaTimKiem}
                `);n.data.success&&(this.ketQuaTimKiem=n.data.data),console.log(this.ketQuaTimKiem)}catch(n){throw console.log("Lá»—i tÃ¬m gv: ",n),n}},them_vao_the_input(n){this.MaGV=n},reset(){this.hienKetQua=!1,this.tuKhoaTimKiem="",this.ketQuaTimKiem="",this.MaGV="",this.MaQuyen=""},them_co_quyen(){if(!this.MaGV||!this.MaQuyen){h.fire({title:"Thiáº¿u thÃ´ng tin!",text:"Vui lÃ²ng nháº­p Ä‘á»§ thÃ´ng tin trÆ°á»›c khi lÆ°u.",icon:"warning",confirmButtonText:"OK",confirmButtonColor:"#3085d6"});return}const n={MaGV:this.MaGV.toUpperCase(),MaQuyen:this.MaQuyen};this.$emit("save",n),this.reset()}}},V={key:0,class:"modal-overlay"},K={class:"add-modal"},q={class:"add-modal__content"},B={for:""},w={key:0,for:""},G={class:"container__table"},S={border:"1"},P=["onClick"],$={for:""},N={for:""},I=["value"],A={class:"modal-actions"};function D(n,e,g,_,a,s){return g.isOpen?(u(),l("div",V,[t("div",K,[t("div",q,[e[12]||(e[12]=t("h2",null,"ThÃªm quyá»n cho giÃ¡o viÃªn",-1)),t("label",B,[e[6]||(e[6]=m(" TÃ¬m giÃ¡o viÃªn: ")),f(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>a.tuKhoaTimKiem=o),type:"text",placeholder:"Nháº­p mÃ£ giÃ¡o viÃªn hoáº·c tÃªn giÃ¡o viÃªn"},null,512),[[C,a.tuKhoaTimKiem]]),t("button",{id:"search-button",onClick:e[1]||(e[1]=(...o)=>s.goi_api_tim_giao_vien&&s.goi_api_tim_giao_vien(...o))},"ğŸ”")]),a.hienKetQua?(u(),l("label",w,[e[8]||(e[8]=m(" Káº¿t quáº£: ")),t("div",G,[t("table",S,[e[7]||(e[7]=t("thead",null,[t("tr",null,[t("th",null,"STT"),t("th",null,"MÃ£ giÃ¡o viÃªn"),t("th",null,"TÃªn giÃ¡o viÃªn"),t("th",null,"MÃ£ bá»™ mÃ´n"),t("th",null,"TÃªn bá»™ mÃ´n"),t("th",null,"Chá»n")])],-1)),t("tbody",null,[(u(!0),l(p,null,M(a.ketQuaTimKiem,(o,i)=>(u(),l("tr",{key:o.MaGV},[t("td",null,r(i+1),1),t("td",null,r(o.MaGV),1),t("td",null,r(o.HoTenGV),1),t("td",null,r(o.MaBM),1),t("td",null,r(o.TenBM),1),t("td",null,[t("button",{id:"add-button",onClick:v=>s.them_vao_the_input(o.MaGV),title:"Chá»n giÃ¡o viÃªn nÃ y"},"â•",8,P)])]))),128))])])])])):y("",!0),t("label",$,[e[9]||(e[9]=m(" Nháº­p mÃ£ giÃ¡o viÃªn: ")),f(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>a.MaGV=o),type:"text",name:"",id:"",placeholder:"Nháº­p mÃ£ giÃ¡o viÃªn muá»‘n phÃ¢n cÃ´ng"},null,512),[[C,a.MaGV]])]),t("label",N,[e[11]||(e[11]=m(" Chá»n quyá»n: ")),f(t("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>a.MaQuyen=o),name:"",id:""},[e[10]||(e[10]=t("option",{disabled:"",value:""},"-- Chá»n quyá»n --",-1)),(u(!0),l(p,null,M(a.danhSachQuyen,o=>(u(),l("option",{key:o.MaQuyen,value:o.MaQuyen},r(o.MaQuyen),9,I))),128))],512),[[k,a.MaQuyen]])]),t("div",A,[t("button",{onClick:e[4]||(e[4]=o=>n.$emit("close"))},"ÄÃ³ng"),t("button",{onClick:e[5]||(e[5]=(...o)=>s.them_co_quyen&&s.them_co_quyen(...o))},"ThÃªm")])])])])):y("",!0)}const O=T(x,[["render",D],["__scopeId","data-v-8663e778"]]),L={components:{ThemCoQuyenModalVue:O},async created(){await this.goi_api_lay_thong_tin_session(),await this.hien_danh_sach_co_quyen()},data(){return{danhSachCoQuyen:[],hienModalThem:!1}},methods:{async goi_api_lay_thong_tin_session(){try{const n=await c.get(`${d}/dang-nhap/lay-thong-tin-session`);n.data.success&&console.log("Pháº£n há»“i sá»§a session: ",n.data.thongTinSession)}catch(n){console.log(n)}},async hien_danh_sach_co_quyen(){try{const n=await c.get(`${d}/co-quyen/danh-sach-co-quyen`);n.data.success&&(console.log("Pháº£n há»“i sá»§a API: ",n.data.data),this.danhSachCoQuyen=n.data.data)}catch(n){console.log(n)}},async goi_api_them_co_quyen(n){try{(await c.post(`${d}/co-quyen/them-co-quyen`,n)).data.success?(h.fire({icon:"success",title:"ThÃªm thÃ nh cÃ´ng!",text:"Dá»¯ liá»‡u Ä‘Ã£ Ä‘Æ°á»£c thÃªm vÃ o há»‡ thá»‘ng.",showConfirmButton:!1,timer:1500,timerProgressBar:!0,toast:!0,position:"top-end",background:"#f0fff4",iconColor:"#2ecc71",customClass:{popup:"success-toast",title:"success-title",content:"success-content"}}),this.hien_danh_sach_co_quyen(),this.hienModalThem=!1):h.fire({icon:"error",title:"ThÃªm tháº¥t báº¡i!",text:"KhÃ´ng thá»ƒ thÃªm dá»¯ liá»‡u vÃ o há»‡ thá»‘ng.",showConfirmButton:!1,timer:1500,timerProgressBar:!0,toast:!0,position:"top-end",background:"#fff1f2",iconColor:"#e74c3c",customClass:{popup:"error-toast",title:"error-title",content:"error-content"}})}catch(e){console.error(e),h.fire("Lá»—i!","CÃ³ lá»—i xáº£y ra khi thÃªm dá»¯ liá»‡u!")}},async goi_api_xoa_co_quyen(n,e){if((await h.fire({title:"XÃ¡c nháº­n xÃ³a",text:"Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a dá»¯ liá»‡u nÃ y khÃ´ng?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"XÃ³a",cancelButtonText:"Há»§y"})).isConfirmed)try{(await c.delete(`${d}/co-quyen/xoa-co-quyen?MaGV=${n}&MaQuyen=${e}`)).data.success?(h.fire({icon:"success",title:"XÃ³a thÃ nh cÃ´ng!",text:"Dá»¯ liá»‡u Ä‘Ã£ Ä‘Æ°á»£c xÃ³a khá»i há»‡ thá»‘ng.",showConfirmButton:!1,timer:1500,timerProgressBar:!0,toast:!0,position:"top-end",background:"#f0fff4",iconColor:"#2ecc71",customClass:{popup:"success-toast",title:"success-title",content:"success-content"}}),this.hien_danh_sach_co_quyen()):h.fire({icon:"error",title:"XÃ³a tháº¥t báº¡i!",text:"KhÃ´ng thá»ƒ xÃ³a dá»¯ liá»‡u khá»i há»‡ thá»‘ng.",showConfirmButton:!1,timer:1500,timerProgressBar:!0,toast:!0,position:"top-end",background:"#fff1f2",iconColor:"#e74c3c",customClass:{popup:"error-toast",title:"error-title",content:"error-content"}})}catch(_){console.error(_),h.fire("Lá»—i!","CÃ³ lá»—i xáº£y ra khi thÃªm dá»¯ liá»‡u!")}},duoc_xoa(n){return n=="GIAO_VIEN"?0:1},mo_modal_them_co_quyen(){this.hienModalThem=!0},dong_modal_them_co_quyen(){this.hienModalThem=!1}}},U={class:"container"},X={class:"container__actions"},H={class:"container__add"},E={class:"container__table"},F={border:"1"},z=["onClick"],R={key:1,title:"Quyá»n máº·c Ä‘á»‹nh, khÃ´ng Ä‘Æ°á»£c xÃ³a"};function j(n,e,g,_,a,s){const o=b("them-co-quyen-modal-vue");return u(),l("div",U,[e[3]||(e[3]=t("h1",null,"PhÃ¢n quyá»n",-1)),t("div",X,[t("div",H,[e[1]||(e[1]=t("b",null,"ThÃªm phÃ¢n quyá»n",-1)),t("button",{onClick:e[0]||(e[0]=(...i)=>s.mo_modal_them_co_quyen&&s.mo_modal_them_co_quyen(...i))},"â•")])]),Q(o,{isOpen:a.hienModalThem,onClose:s.dong_modal_them_co_quyen,onSave:s.goi_api_them_co_quyen},null,8,["isOpen","onClose","onSave"]),t("div",E,[t("table",F,[e[2]||(e[2]=t("thead",null,[t("tr",null,[t("th",null,"STT"),t("th",null,"MÃ£ giÃ¡o viÃªn"),t("th",null,"MÃ£ quyá»n"),t("th",null,"TÃªn giÃ¡o viÃªn"),t("th",null,"Tá»• bá»™ mÃ´n"),t("th",null,"XÃ³a")])],-1)),t("tbody",null,[(u(!0),l(p,null,M(a.danhSachCoQuyen,(i,v)=>(u(),l("tr",{key:`${i.MaGV}-${i.MaQuyen}`},[t("td",null,r(v+1),1),t("td",null,r(i.MaGV),1),t("td",null,r(i.MaQuyen),1),t("td",null,r(i.HoTenGV),1),t("td",null,r(i.TenBM),1),t("td",null,[s.duoc_xoa(i.MaQuyen)?(u(),l("button",{key:0,onClick:J=>s.goi_api_xoa_co_quyen(i.MaGV,i.MaQuyen)},"ğŸ—‘ï¸",8,z)):y("",!0),s.duoc_xoa(i.MaQuyen)==0?(u(),l("span",R,"ğŸ”’")):y("",!0)])]))),128))])])])])}const Y=T(L,[["render",j],["__scopeId","data-v-2d062b0f"]]);export{Y as default};
