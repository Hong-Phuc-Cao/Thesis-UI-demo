import{_ as f,S as u,c as g,d as S,a as o,e as m,w as h,v as c,o as N,y,z as C,F as x,g as b,b as _,A as p,t as d}from"./index-DsFX8v4I.js";/* empty css                     *//* empty css                   */const H={props:{isOpen:Boolean},data(){return{NamHoc:"",SoTietChuan:"",NgayDauNam:"",NgayCuoiNam:""}},methods:{kiem_tra_nam_hoc(){const a=/^\d{4}-\d{4}$/;this.NamHoc&&!a.test(this.NamHoc)&&(this.NamHoc=this.NamHoc.replace(/[^\d-]/g,""),this.NamHoc.length===4&&!this.NamHoc.includes("-")&&(this.NamHoc+="-"))},async them_nam_hoc(){if(!/^\d{4}-\d{4}$/.test(this.NamHoc)){u.fire({title:"ƒê·ªãnh d·∫°ng nƒÉm h·ªçc kh√¥ng h·ª£p l·ªá!",text:"Vui l√≤ng nh·∫≠p theo ƒë·ªãnh d·∫°ng YYYY-YYYY (v√≠ d·ª•: 2025-2026)",icon:"error",confirmButtonText:"OK",confirmButtonColor:"#3085d6"});return}const[t,s]=this.NamHoc.split("-").map(Number);if(s-t!==1){u.fire({title:"NƒÉm h·ªçc kh√¥ng h·ª£p l·ªá!",text:"NƒÉm th·ª© hai ph·∫£i l·ªõn h∆°n nƒÉm th·ª© nh·∫•t ƒë√∫ng 1 nƒÉm",icon:"error",confirmButtonText:"OK",confirmButtonColor:"#3085d6"});return}if(!this.NamHoc||!this.SoTietChuan||!this.NgayDauNam||!this.NgayCuoiNam){u.fire({title:"Thi·∫øu th√¥ng tin!",text:"Vui l√≤ng nh·∫≠p ƒë·ªß th√¥ng tin tr∆∞·ªõc khi l∆∞u.",icon:"warning",confirmButtonText:"OK",confirmButtonColor:"#3085d6"});return}const r={NamHoc:this.NamHoc,SoTietChuan:this.SoTietChuan,NgayDauNam:this.NgayDauNam,NgayCuoiNam:this.NgayCuoiNam};this.$emit("save",r)}}},k={key:0,class:"modal-overlay"},B={class:"add-modal"},Y={class:"add-modal__content"},w={class:"modal-actions"};function M(a,t,s,r,i,e){return s.isOpen?(N(),g("div",k,[o("div",B,[o("div",Y,[t[11]||(t[11]=o("h2",null,"Th√™m nƒÉm h·ªçc",-1)),o("label",null,[t[7]||(t[7]=m(" NƒÉm h·ªçc ")),h(o("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>i.NamHoc=n),type:"text",placeholder:"YYYY-YYYY",pattern:"\\d{4}-\\d{4}",title:"Vui l√≤ng nh·∫≠p theo ƒë·ªãnh d·∫°ng YYYY-YYYY (v√≠ d·ª•: 2025-2026)",onInput:t[1]||(t[1]=(...n)=>e.kiem_tra_nam_hoc&&e.kiem_tra_nam_hoc(...n))},null,544),[[c,i.NamHoc]])]),o("label",null,[t[8]||(t[8]=m(" S·ªë ti·∫øt chu·∫©n: ")),h(o("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>i.SoTietChuan=n),type:"number",min:"1"},null,512),[[c,i.SoTietChuan]])]),o("label",null,[t[9]||(t[9]=m(" Ng√†y ƒë·∫ßu nƒÉm: ")),h(o("input",{"onUpdate:modelValue":t[3]||(t[3]=n=>i.NgayDauNam=n),type:"date",name:"",id:""},null,512),[[c,i.NgayDauNam]])]),o("label",null,[t[10]||(t[10]=m(" Ng√†y cu·ªëi nƒÉm: ")),h(o("input",{"onUpdate:modelValue":t[4]||(t[4]=n=>i.NgayCuoiNam=n),type:"date",name:"",id:""},null,512),[[c,i.NgayCuoiNam]])]),o("div",w,[o("button",{onClick:t[5]||(t[5]=n=>a.$emit("close"))},"ƒê√≥ng"),o("button",{onClick:t[6]||(t[6]=(...n)=>e.them_nam_hoc&&e.them_nam_hoc(...n))},"Th√™m")])])])])):S("",!0)}const O=f(H,[["render",M]]),V={props:{isOpen:Boolean,namHoc:Object},data(){return{NamHoc:"",SoTietChuan:"",NgayDauNam:"",NgayCuoiNam:""}},computed:{formattedNgayDauNam:{get(){if(!this.NgayDauNam)return"";const a=new Date(this.NgayDauNam),t=a.getFullYear(),s=String(a.getMonth()+1).padStart(2,"0"),r=String(a.getDate()).padStart(2,"0");return`${t}-${s}-${r}`},set(a){this.updateNgayDauNam({target:{value:a}})}},formattedNgayCuoiNam:{get(){if(!this.NgayCuoiNam)return"";const a=new Date(this.NgayCuoiNam),t=a.getFullYear(),s=String(a.getMonth()+1).padStart(2,"0"),r=String(a.getDate()).padStart(2,"0");return`${t}-${s}-${r}`},set(a){this.updateNgayCuoiNam({target:{value:a}})}}},watch:{namHoc:{immediate:!0,deep:!0,handler(a){a?(this.NamHoc=a.NamHoc||"",this.SoTietChuan=a.SoTietChuan||"",this.NgayDauNam=a.NgayDauNam?new Date(a.NgayDauNam).toISOString():"",this.NgayCuoiNam=a.NgayCuoiNam?new Date(a.NgayCuoiNam).toISOString():""):(this.NamHoc="",this.SoTietChuan="",this.NgayDauNam="",this.NgayCuoiNam="")}}},methods:{updateNgayDauNam(a){this.NgayDauNam=a.target.value?new Date(a.target.value).toISOString():""},updateNgayCuoiNam(a){this.NgayCuoiNam=a.target.value?new Date(a.target.value).toISOString():""},luu_thong_tin(){const a={NamHoc:this.NamHoc,SoTietChuan:this.SoTietChuan,NgayDauNam:this.NgayDauNam,NgayCuoiNam:this.NgayCuoiNam};this.$emit("save",a)}}},U={key:0,class:"modal-overlay"},L={class:"edit-modal"},I={class:"edit-modal__content"},P={class:"modal-actions"};function $(a,t,s,r,i,e){return s.isOpen?(N(),g("div",U,[o("div",L,[o("div",I,[t[12]||(t[12]=o("h2",null,"S·ª≠a nƒÉm h·ªçc",-1)),o("label",null,[t[8]||(t[8]=m(" NƒÉm h·ªçc ")),h(o("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>i.NamHoc=n),type:"text"},null,512),[[c,i.NamHoc]])]),o("label",null,[t[9]||(t[9]=m(" S·ªë ti·∫øt chu·∫©n: ")),h(o("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>i.SoTietChuan=n),type:"number",min:"1"},null,512),[[c,i.SoTietChuan]])]),o("label",null,[t[10]||(t[10]=m(" Ng√†y ƒë·∫ßu nƒÉm: ")),h(o("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>e.formattedNgayDauNam=n),type:"date",name:"",id:"",onChange:t[3]||(t[3]=(...n)=>e.updateNgayDauNam&&e.updateNgayDauNam(...n))},null,544),[[c,e.formattedNgayDauNam]])]),o("label",null,[t[11]||(t[11]=m(" Ng√†y cu·ªëi nƒÉm: ")),h(o("input",{"onUpdate:modelValue":t[4]||(t[4]=n=>e.formattedNgayCuoiNam=n),type:"date",name:"",id:"",onChange:t[5]||(t[5]=(...n)=>e.updateNgayCuoiNam&&e.updateNgayCuoiNam(...n))},null,544),[[c,e.formattedNgayCuoiNam]])]),o("div",P,[o("button",{onClick:t[6]||(t[6]=n=>a.$emit("close"))},"ƒê√≥ng"),o("button",{onClick:t[7]||(t[7]=(...n)=>e.luu_thong_tin&&e.luu_thong_tin(...n))},"L∆∞u")])])])])):S("",!0)}const K=f(V,[["render",$]]),F={components:{ThemNamHocModalVue:O,SuaNamHocModalVue:K},data(){return{danhSachNamHoc:[],hienModalThem:!1,hienModalSua:!1,namHocDangChinhSua:null}},async created(){await this.hien_danh_sach_nam_hoc()},methods:{async hien_danh_sach_nam_hoc(){try{const a=await _.get(`${p}/nam-hoc/danh-sach-nam-hoc`);a.data.success&&(this.danhSachNamHoc=a.data.data)}catch(a){console.log("L·ªói khi l·∫•y danh s√°ch nƒÉm h·ªçc: "),console.log(a)}},async goi_api_them_nam_hoc(a){try{(await _.post(`
                    ${p}/nam-hoc/them-nam-hoc
                `,a)).data.success?(u.fire({icon:"success",title:"Th√™m th√†nh c√¥ng!",text:"D·ªØ li·ªáu ƒë√£ ƒë∆∞·ª£c th√™m v√†o h·ªá th·ªëng.",showConfirmButton:!1,timer:1500,timerProgressBar:!0,toast:!0,position:"top-end",background:"#f0fff4",iconColor:"#2ecc71",customClass:{popup:"success-toast",title:"success-title",content:"success-content"}}),await this.hien_danh_sach_nam_hoc(),this.hienModalThem=!1):u.fire({icon:"error",title:"Th√™m th·∫•t b·∫°i!",text:"Kh√¥ng th·ªÉ th√™m d·ªØ li·ªáu v√†o h·ªá th·ªëng.",showConfirmButton:!1,timer:1500,timerProgressBar:!0,toast:!0,position:"top-end",background:"#fff1f2",iconColor:"#e74c3c",customClass:{popup:"error-toast",title:"error-title",content:"error-content"}})}catch(t){console.error(t),u.fire("L·ªói!","C√≥ l·ªói x·∫£y ra khi th√™m d·ªØ li·ªáu!")}},async goi_api_sua_nam_hoc(a){const t={SoTietChuan:a.SoTietChuan,NgayDauNam:this.format_ngay(a.NgayDauNam),NgayCuoiNam:this.format_ngay(a.NgayCuoiNam)};console.log(a);try{(await _.put(`
                    ${p}/nam-hoc/sua-nam-hoc?NamHoc=${a.NamHoc}
                `,t)).data.success?(u.fire({icon:"success",title:"S·ª≠a th√†nh c√¥ng!",text:"D·ªØ li·ªáu ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t th√†nh c√¥ng.",showConfirmButton:!1,timer:1500,timerProgressBar:!0,toast:!0,position:"top-end",background:"#f0fff4",iconColor:"#2ecc71",customClass:{popup:"success-toast",title:"success-title",content:"success-content"}}),await this.hien_danh_sach_nam_hoc(),this.hienModalSua=!1):u.fire({icon:"error",title:"S·ª≠a th·∫•t b·∫°i!",text:"Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t d·ªØ li·ªáu.",showConfirmButton:!1,timer:1500,timerProgressBar:!0,toast:!0,position:"top-end",background:"#fff1f2",iconColor:"#e74c3c",customClass:{popup:"error-toast",title:"error-title",content:"error-content"}})}catch(s){console.error("L·ªói khi c·∫≠p nh·∫≠t t·ªï b·ªô m√¥n:",s),u.fire("L·ªói!","C√≥ l·ªói x·∫£y ra khi s·ª≠a d·ªØ li·ªáu!")}},format_ngay(a){const t=new Date(a),s=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");return`${s}-${r}-${i}`},async goi_api_xoa_nam_hoc(a){if((await u.fire({title:"X√°c nh·∫≠n x√≥a",text:"B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a d·ªØ li·ªáu n√†y kh√¥ng?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"X√≥a",cancelButtonText:"H·ªßy"})).isConfirmed)try{(await _.delete(`
                        ${p}/nam-hoc/xoa-nam-hoc?NamHoc=${a}
                    `)).data.success?(u.fire({icon:"success",title:"X√≥a th√†nh c√¥ng!",text:"D·ªØ li·ªáu ƒë√£ ƒë∆∞·ª£c x√≥a kh·ªèi h·ªá th·ªëng.",showConfirmButton:!1,timer:1500,timerProgressBar:!0,toast:!0,position:"top-end",background:"#f0fff4",iconColor:"#2ecc71",customClass:{popup:"success-toast",title:"success-title",content:"success-content"}}),await this.hien_danh_sach_nam_hoc()):u.fire({icon:"error",title:"X√≥a th·∫•t b·∫°i!",text:"Kh√¥ng th·ªÉ x√≥a d·ªØ li·ªáu kh·ªèi h·ªá th·ªëng.",showConfirmButton:!1,timer:1500,timerProgressBar:!0,toast:!0,position:"top-end",background:"#fff1f2",iconColor:"#e74c3c",customClass:{popup:"error-toast",title:"error-title",content:"error-content"}})}catch(s){console.log(s),u.fire("L·ªói!","C√≥ l·ªói x·∫£y ra khi x√≥a d·ªØ li·ªáu!")}},mo_modal_them_nam_hoc(){this.hienModalThem=!0},dong_modal_them_nam_hoc(){this.hienModalThem=!1},mo_modal_sua_nam_hoc(a){this.namHocDangChinhSua={...a},this.hienModalSua=!0},dong_modal_sua_nam_hoc(){this.hienModalSua=!1}}},X={class:"container"},A={class:"container__actions"},E={class:"container__add"},j={class:"container__table"},z={border:"1"},R=["onClick"],q=["onClick"];function G(a,t,s,r,i,e){const n=C("them-nam-hoc-modal-vue"),D=C("sua-nam-hoc-modal-vue");return N(),g("div",X,[t[3]||(t[3]=o("h1",null,"NƒÉm h·ªçc",-1)),o("div",A,[o("div",E,[t[1]||(t[1]=o("b",null,"Th√™m nƒÉm h·ªçc",-1)),o("button",{onClick:t[0]||(t[0]=(...l)=>e.mo_modal_them_nam_hoc&&e.mo_modal_them_nam_hoc(...l))},"‚ûï")])]),y(n,{isOpen:i.hienModalThem,onClose:e.dong_modal_them_nam_hoc,onSave:e.goi_api_them_nam_hoc},null,8,["isOpen","onClose","onSave"]),o("div",j,[o("table",z,[t[2]||(t[2]=o("thead",null,[o("tr",null,[o("th",null,"STT"),o("th",null,"NƒÉm h·ªçc"),o("th",null,"S·ªë ti·∫øt chu·∫©n"),o("th",null,"Ng√†y ƒë·∫ßu nƒÉm"),o("th",null,"Ng√†y cu·ªëi nƒÉm"),o("th",null,"S·ª≠a"),o("th",null,"X√≥a")])],-1)),o("tbody",null,[(N(!0),g(x,null,b(i.danhSachNamHoc,(l,v)=>(N(),g("tr",{key:l.NamHoc},[o("td",null,d(v+1),1),o("td",null,d(l.NamHoc),1),o("td",null,d(l.SoTietChuan),1),o("td",null,d(e.format_ngay(l.NgayDauNam)),1),o("td",null,d(e.format_ngay(l.NgayCuoiNam)),1),o("td",null,[o("button",{onClick:T=>e.mo_modal_sua_nam_hoc(l)},"‚úèÔ∏è",8,R)]),o("td",null,[o("button",{onClick:T=>e.goi_api_xoa_nam_hoc(l.NamHoc)},"üóëÔ∏è",8,q)])]))),128))])]),y(D,{isOpen:i.hienModalSua,onClose:e.dong_modal_sua_nam_hoc,namHoc:i.namHocDangChinhSua,onSave:e.goi_api_sua_nam_hoc},null,8,["isOpen","onClose","namHoc","onSave"])])])}const Z=f(F,[["render",G],["__scopeId","data-v-d164ecf5"]]);export{Z as default};
